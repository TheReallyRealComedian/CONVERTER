services:
  markdown-converter:
    build: .
    container_name: markdown-converter
    dns:
      - 8.8.8.8
      - 8.8.4.4
    ports:
      # Map port 5656 on your host to port 5000 inside the container
      - "5656:5000"
    volumes:
      # Map our local output folder to the app's output folder inside the container
      # This makes the generated PDFs persist on your server's filesystem.
      - ./output_pdfs:/app/output
      # Mount Google Cloud credentials (optional, for Cloud TTS)
      - ./google-credentials.json:/app/google-credentials.json
    environment:
      - DEEPGRAM_API_KEY=${DEEPGRAM_API_KEY}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - GOOGLE_APPLICATION_CREDENTIALS=${GOOGLE_APPLICATION_CREDENTIALS}
    env_file:
      - .env
    restart: unless-stopped