<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}File Transformer{% endblock %}</title>
    <link rel="icon" href="data:,">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block head_extra %}{% endblock %}
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="{{ url_for('markdown_converter') }}">File Transformer</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('markdown_converter') %}active{% endif %}" href="{{ url_for('markdown_converter') }}">Markdown to PDF</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('document_converter') %}active{% endif %}" href="{{ url_for('document_converter') }}">Document Converter</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('audio_converter') %}active{% endif %}" href="{{ url_for('audio_converter') }}">Audio Converter</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('mermaid_converter') %}active{% endif %}" href="{{ url_for('mermaid_converter') }}">Mermaid Converter</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    {% block content %}{% endblock %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block scripts %}{% endblock %}

    <script>
        /**
         * Pane Resizing Logic
         * This script finds the editor and preview panes and makes them resizable.
         */
        document.addEventListener('DOMContentLoaded', function() {
            const editorPane = document.querySelector('.editor-pane');
            const previewPane = document.querySelector('.preview-pane');

            // Only run if the split-pane layout is present on the page
            if (editorPane && previewPane) {
                // Create and insert the resizer handle between the panes
                const resizer = document.createElement('div');
                resizer.className = 'resizer';
                editorPane.parentNode.insertBefore(resizer, previewPane);

                let isResizing = false;

                resizer.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    isResizing = true;
                    document.addEventListener('mousemove', handleMouseMove);
                    document.addEventListener('mouseup', stopResize);
                });

                function handleMouseMove(e) {
                    if (!isResizing) return;
                    const totalWidth = editorPane.parentNode.offsetWidth;
                    const newEditorWidth = e.clientX;
                    editorPane.style.flexBasis = `${(newEditorWidth / totalWidth) * 100}%`;
                    previewPane.style.flexBasis = `${((totalWidth - newEditorWidth) / totalWidth) * 100}%`;
                }

                function stopResize() {
                    isResizing = false;
                    document.removeEventListener('mousemove', handleMouseMove);
                    document.removeEventListener('mouseup', stopResize);
                }
            }
        });
    </script>
</body>
</html>